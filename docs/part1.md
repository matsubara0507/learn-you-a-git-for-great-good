## はじめの一歩

この章では git の構成要素を紹介しながらステップ・バイ・ステップに、試しに  git でバージョン管理をしてみよう。

### git が管理するもの

構成要素を紹介する前に，そもそも git が管理する“モノ”が何なのか示しておく。
git は **特定のフォルダを指定し、その中にあるファイル・フォルダのバージョンを管理する** 。
というか、その指定したフォルダ(ここでは ***プロジェクト*** と呼ぶ)のバージョンを管理するということだ。

では早速フォルダを指定して git によるバージョン管理を始めてみよう！

```
$ mkdir sample-project
$ cd sample-project
$ git init
```

### 登場人物

git を知るうえで重要となるモノは主に以下の３つ。

1. ブロブ
2. コミット
3. リポジトリ

#### ブロブ

前章であたかも、古いバージョンのファイルに別名を与えて保存するのは悪いやり方だと表現したが、実は **git も同じように古いバージョンのファイルに別名を与えて保存している** だけだ。
この保存した古いバージョンのファイル・フォルダを ***ブロブ*** という。

ということで、まずはバージョン管理するためのファイルを作ろう。

```
$ cat sample.csv
71,fb2735f5-88f3-48ec-8b7a-109c1cfea7f0,田中 愛菜
83,bd3f7e8f-99c4-4882-b0be-5cc26670f92a,山本 美咲
51,ccf3a690-d087-4c69-b843-ccf7b1f393ed,鈴木 大翔
```

#### コミット

では、手動で名前を付けていたのと何が違うのか。
そもそも、前章で紹介した問題を思い出してほしい。

そう、**バージョンの時系列・前後関係が分からないことだ**。
この時系列をまとめているのが ***コミット*** だ。

コミットには管理すると指定したフォルダのバージョンと、ひとつ前のコミットの番号が書いてあると考えてくれればよい。

試しにコミットを作ってみよう。

```
$ git add . && git commit -m "First commit"
[master (root-commit) a117493] First commit
 1 file changed, 3 insertions(+)
 create mode 100644 sample.csv
```

うまくいっただろうか？
もしエラーメッセージが出ていてもとりあえず次に進んでみよう。

#### コミットの中身

実はコミットには前述した2つの他に以下の3つを保存できる。

- 誰がコミットしたか（名前とメールアドレス）
- いつコミットしたか
- コミットメッセージ（さっきの "First commit" の部分）

もし、次のようなエラーメッセージが出た場合は「誰が？」の部分が足りない。

```
```

なので追加してあげよう。

```
$ git config --global user.name "John Doe"
$ git config --global user.email johndoe@example.com
```

#### リポジトリ

リポジトリとは英語で「貯蔵庫」って意味で、リポジトリは前述したブロブやコミットを保存しておく貯蔵庫のことを指す。
実は貯蔵庫も `sample-project` の中に入っている！
`.git` というフォルダだ。

この `.git` というフォルダの中に **全ての古いバージョンのファイルやコミットが詰まっている** 。
すなわち、この `.git` フォルダさえあれば一度保存したバージョンのファイル・フォルダを復元可能なのだ！

### 3つの世界

コマンド一発でコミットを作れてしまったが、実はコミットを作るのに３つの段階を踏む。

1. ワークツリー
2. インデックス
3. ヘッド

その３つの段階を理解することが git の操作のちゃんとしたイメージに繫がる。

#### ワークツリー

ワークツリーはバージョンを保存する前の段階だ。
保存する前ということはブロブが作られていないということだ。
例えば `sample.csv` を書き換えてみよう。

```
```

保存していないこのバージョンの `sample.csv` が存在するのが ***ワークツリー*** という段階だ。

#### インデックス

さて、この保存前の `sample.csv` を次の段階にあげてみよう。

```
$ git add sample.csv
```

こうすることで `sample.csv` の新しいブロブが作成されて ***インデックス*** という段階に入る。
ブロブこそ作成されたが、コミットは作られていない状態だ。

#### ヘッド

いよいよ最終段階としてコミットを作る。

```
$ git commit -m "Change sample.csv"
```

こうすることで、インデックスにあるバージョンのファイルを使ってコミットを作る。
こうして出来上がった今適用されているコミットを ***ヘッド*** という。

### まとめ

- ブロブは古いバージョンのファイル・フォルダ
- コミットはプロジェクトのブロブと一つ前のコミットを指定してバージョンに時系列を与えたもの
- リポジトリはブロブやコミットの貯蔵庫で、これさえあればなんでも復元できる
- ワークツリー・インデックス・ヘッドの３段階でバージョン管理する

